@model IEnumerable<Frontend_PI.Models.DeliveryMan>

<script src="~/Scripts/jquery-3.4.1.min.js"></script>
<script type="text/javascript">

    $(document).ready(function () {


        $(".btn-info").click(function () {
            debugger;
            if (confirm('vous souhaitez confirmer ?')) {

                affecter(@ViewBag.id,$(this).prop('name'));
            }

        });



    }
    );

    function affecter(idc, idl) {
        debugger;
        $.ajax({
            async: true,
            type: 'POST',
            dataType: 'JSON',
            contentType: 'application/json;charset=utf-8',
            url: '/DeliveryMan/AffecterCommandeLivreur/',
            data: JSON.stringify({
                idCommande: idc,
                idLivreur: idl


            })
            ,
            success: function (data) {
                debugger;
                location.replace("https://localhost:44304/DeliveryMan/CommandeByDeliveryMan/" + idl)

            },
            error: function (err) {

                alert(err + "un erreur a été survenu veuillez contactez votre administrateur ");
            }


        })
    }
</script>

<h2>Affectation de la Commande  </h2>

<h2> reference : @ViewBag.refer</h2>
<div>

    <a class="btn btn-default" style="float:right" href="/DeliveryMan/AffecterCommande" role="button">Retourner a la liste</a>
</div>
<hr />


<p>

    <table width="40%">
        <tr>
            <td style="align-content:left;float:left">
                <span>
                    <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-clock-history text-center" ;" viewBox="0 0 16 16">
                        <path d="M8.515 1.019A7 7 0 0 0 8 1V0a8 8 0 0 1 .589.022l-.074.997zm2.004.45a7.003 7.003 0 0 0-.985-.299l.219-.976c.383.086.76.2 1.126.342l-.36.933zm1.37.71a7.01 7.01 0 0 0-.439-.27l.493-.87a8.025 8.025 0 0 1 .979.654l-.615.789a6.996 6.996 0 0 0-.418-.302zm1.834 1.79a6.99 6.99 0 0 0-.653-.796l.724-.69c.27.285.52.59.747.91l-.818.576zm.744 1.352a7.08 7.08 0 0 0-.214-.468l.893-.45a7.976 7.976 0 0 1 .45 1.088l-.95.313a7.023 7.023 0 0 0-.179-.483zm.53 2.507a6.991 6.991 0 0 0-.1-1.025l.985-.17c.067.386.106.778.116 1.17l-1 .025zm-.131 1.538c.033-.17.06-.339.081-.51l.993.123a7.957 7.957 0 0 1-.23 1.155l-.964-.267c.046-.165.086-.332.12-.501zm-.952 2.379c.184-.29.346-.594.486-.908l.914.405c-.16.36-.345.706-.555 1.038l-.845-.535zm-.964 1.205c.122-.122.239-.248.35-.378l.758.653a8.073 8.073 0 0 1-.401.432l-.707-.707z" />
                        <path d="M8 1a7 7 0 1 0 4.95 11.95l.707.707A8.001 8.001 0 1 1 8 0v1z" />
                        <path d="M7.5 3a.5.5 0 0 1 .5.5v5.21l3.248 1.856a.5.5 0 0 1-.496.868l-3.5-2A.5.5 0 0 1 7 9V3.5a.5.5 0 0 1 .5-.5z" />
                    </svg>  @Html.ActionLink("Optimiser la recherche", "AffecterLivreurExecute", new { id = ViewBag.id, cp = ViewBag.cp, refer = ViewBag.refer })
                </span>
            </td>
        </tr>
    </table>











</p>
<table class="table">
    <tr class="bg-info">

        <th>
            @Html.DisplayNameFor(model => model.firstName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.lastName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.adresse)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.codePostal)
        </th>
        <th></th>
    </tr>

    @foreach (var item in Model)
    {
        <tr>

            <td>
                @Html.DisplayFor(modelItem => item.firstName)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.lastName)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.adresse)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.codePostal)
            </td>
            <td>


                <!--@Html.ActionLink("Ajouter", "Create")-->
                <!--<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" color="blue" class="bi bi-cursor-fill" viewBox="0 0 16 16">
                    <path d="M14.082 2.182a.5.5 0 0 1 .103.557L8.528 15.467a.5.5 0 0 1-.917-.007L5.57 10.694.803 8.652a.5.5 0 0 1-.006-.916l12.728-5.657a.5.5 0 0 1 .556.103z" />
                </svg>
                @Html.ActionLink("Affecter a un livreur", "AffecterCommandeLivreur", new { cId = ViewBag.id, idLivreur = item.id })-->


                <button class="btn btn-info" role="button" id="affectButton" name=@item.id>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" color="blue" class="bi bi-cursor-fill" viewBox="0 0 16 16">
                        <path d="M14.082 2.182a.5.5 0 0 1 .103.557L8.528 15.467a.5.5 0 0 1-.917-.007L5.57 10.694.803 8.652a.5.5 0 0 1-.006-.916l12.728-5.657a.5.5 0 0 1 .556.103z" />
                    </svg>

                </button>

            </td>
        </tr>
    }

</table>


